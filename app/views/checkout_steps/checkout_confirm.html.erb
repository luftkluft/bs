<main class="container general-main-wrap">
  <h1 class="general-title-margin"><%= I18n.t('checkout.title') %></h1>
  <ul class="steps list-inline">
    <li class="step active">
      <span class="step-number">
        <i class="fa fa-check step-icon"></i></span>
      <span class="step-text hidden-xs"><%= I18n.t('checkout.steps.address') %></span></li>
    <li class="step-divider"></li>
    <li class="step active">
      <span class="step-number">
        <i class="fa fa-check step-icon"></i></span>
      <span class="step-text hidden-xs"><%= I18n.t('checkout.steps.delivery') %></span></li>
    <li class="step-divider"></li>
    <li class="step active">
      <span class="step-number">
        <i class="fa fa-check step-icon"></i></span>
      <span class="step-text hidden-xs"><%= I18n.t('checkout.steps.payment') %></span></li>
    <li class="step-divider"></li>
    <li class="step active">
      <span class="step-number">4</span>
      <span class="step-text hidden-xs"><%= I18n.t('checkout.steps.confirm') %></span></li>
    <li class="step-divider"></li>
    <li class="step">
      <span class="step-number">5</span>
      <span class="step-text hidden-xs"><%= I18n.t('checkout.steps.complete') %></span></li>
  </ul>
  <div class="row mb-20">
    <a href="/checkout_steps/checkout_address" class="general-back-link">
    <i class="fa fa-long-arrow-left mr-15"></i><%= I18n.t('checkout.edit_address') %></a>
    <div class="col-sm-3">
      <h3 class="general-subtitle"><%= I18n.t('address.shipping') %></h3>
      <p class="general-address">
        <%= @shipping.first_name %>
        &nbsp
        <%= @shipping.last_name %>
        <br />
        <%= @shipping.address %>
        <br />
        <%= @shipping.city %>
        <br />
        <%= @shipping.zip %>
        <br />
        <%= @shipping.country %>
        <br /><%= I18n.t('address.attrs.phone_number.title') %>
        <%= @shipping.phone %>
      </p>
    </div>
    <div class="col-sm-3">
      <h3 class="general-subtitle"><%= I18n.t('address.billing') %></h3>
      <p class="general-address">
        <%= @billing.first_name %>
        &nbsp
        <%= @billing.last_name %>
        <br />
        <%= @billing.address %>
        <br />
        <%= @billing.city %>
        <br />
        <%= @billing.zip %>
        <br />
        <%= @billing.country %>
        <br /><%= I18n.t('address.attrs.phone_number.title') %>
        <%= @billing.phone %>
      </p>
    </div>
    <div class="col-sm-3">
      <h3 class="general-subtitle"><%= I18n.t('shared.order_info.shipments') %></h3>
      <p class="general-address">
        <%= @delivery.duration %>
        <br />by
        <%= @delivery.method %>
      </p>
    </div>
    <div class="col-sm-3">
      <h3 class="general-subtitle"><%= I18n.t('shared.order_info.payment') %></h3>
      <p class="general-address">** ** **
        <%= @card_number[-4..@card_number.size] %>
        <br />
        <%= @exp_date %>
      </p>
    </div>
  </div>

  <div class="divider-lg pt-20">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>
            <span class="in-grey-600"><%= I18n.t('shared.order_items.book') %></span></th>
          <th class="col-method"></th>
          <th>
            <span class="in-grey-600"><%= I18n.t('shared.order_items.price') %></span></th>
          <th>
            <span class="in-grey-600"><%= I18n.t('shared.order_items.quantity') %></span></th>
          <th>
            <span class="in-grey-600"><%= I18n.t('shared.order_items.total') %></span></th>
        </tr>
      </thead>
      <tbody>
        <% @cart_service.items.each do |item| %>
        <tr>
          <td>
            <div class="general-img-wrap-table">
              <%= image_tag @cart_service.image(item.id) %>
            </div>
          </td>
          <td>
            <p class="title">
              <%= @cart_service.book_title(item.id) %>
            </p>
            <p class="in-grey-600 fw-300">
              <%= @cart_service.book_description(item.id) %>
            </p>
          </td>
          <td>
            <span class="font-16 in-gold-500">€
              <%= @cart_service.book_price(item.id) %></span></td>
          <td>
            <span class="ml-30">
              <%= item.quantity %></span></td>
          <td>
            <span class="font-16 in-gold-500">€
              <%= @cart_service.item_subtotal(item.id) %></span></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <div class="text-center general-text-right">
    <p class="in-gold-500 font-18"><%= I18n.t('shared.order_summary.title') %></p>
    <table class="general-summary-table general-summary-table-right general-text-right">
      <tr>
        <td>
          <p class="font-16"><%= I18n.t('shared.order_summary.subtotal') %></p>
        </td>
        <td>
          <p class="font-16">€
            <%= @cart.item_total_price %>
          </p>
        </td>
      </tr>
      <tr>
        <td>
          <p class="font-16"><%= I18n.t('shared.order_summary.delivery') %></p>
        </td>
        <td>
          <p class="font-16">€
            <%= @delivery_price %>
          </p>
        </td>
      </tr>
      <tr>
        <td>
          <p class="font-16"><%= I18n.t('shared.order_summary.coupon_discount') %></p>
        </td>
        <td>
          <p class="font-16">€
            <%= @cart.coupon %>
          </p>
        </td>
      </tr>
      <tr>
        <td>
          <strong class="font-18"><%= I18n.t('shared.order_summary.order_total') %></strong></td>
        <td>
          <strong class="font-18">€
            <%= @cart.order_total_price %></strong></td>
      </tr>
    </table>
  </div>
  <div class="text-center">
    <%= form_for @cart, url: next_wizard_path do |f| %>
    <button type="submit" class="btn btn-default mb-20"><%= I18n.t('order.place_order_btn') %></button>
    <% end %>
  </div>
  <a href="<%= url_for(previous_wizard_path) %>" class="general-back-link">
    <i class="fa fa-long-arrow-left mr-15"></i><%= I18n.t('checkout.back') %></a>
</main>